<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>chatterbox</title>
    <link rel="stylesheet" href="styles/styles.css">

    <!-- dependencies -->
    <!-- <script src="bower_components/jquery/dist/jquery.js"></script> -->
    <script   src="https://code.jquery.com/jquery-3.2.1.js"   integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="   crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.17.0/axios.js" charset="utf-8"></script>
    <script>
      // YOU DO NOT NEED TO EDIT THIS CODE
      if (!/(&|\?)username=/.test(window.location.search)) {
        var newSearch = window.location.search;
        if (newSearch !== '' & newSearch !== '?') {
          newSearch += '&';
        }
        newSearch += 'username=' + (prompt('What is your name?') || 'anonymous');
        window.location.search = newSearch;
      }
    </script>
    <!-- your scripts -->
    <script src="env/config.js"></script>
    <script src="scripts/app.js"></script>
  </head>
  <body>
    <div id="main">
      <h1>chatterbox</h1>
      <!-- Your HTML goes here! -->

      <!-- <div class="spinner"><img src="images/spiffygif_46x46.gif"></div> -->

      <!-- <div id="rooms">
        Room:
        <select id="roomSelect">
        </select>
      </div>
      <form action="#" id="send" method="post">
        <input type="text" name="message" id="message"/>
        <input type="submit" name="submit" class="submit"/>
      </form>    </div>
    <div id="chats"></div> -->
      <div id="rooms">
        Room:
        <select id="roomSelect">
           <option value="value1">general</option>
           <option value="value1">hrr25</option>
        </select>
      </div>
      <form  id="send">
        <input type="text" id="message"/>
        <input type="button" value="submit"/>
      </form>    </div>
    <div id="chats"></div>

    <script>
      const send$ = document.getElementById('send')


      send$.onsubmit = function myFunc(e) {
        e.preventDefault();
        const rooms$ = document.getElementById('roomSelect')
        let roomname;
        for (var elem of rooms$) {
          if (elem.selected) {
            currentRoom = elem.innerText;
            break;
          }
        }
        const text = e.target[0].value;

        axios.post('/testing123', {text, roomname})
          .then(data => console.log('successful post', data))
          .catch(err => console.log('ERR: unsuccessful post', err))

      }
    </script>
  </body>
</html>
